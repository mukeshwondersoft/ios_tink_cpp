name: Compile Tink C++ for iOS

on: [push]

jobs:
 build:
   runs-on: macos-latest

   steps:
   - name: Checkout repository
     uses: actions/checkout@v2

   - name: Set up Bazel
     run: |
       /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
       export BAZEL_VERSION=5.2.0
       curl -fLO "https://github.com/bazelbuild/bazel/releases/download/$BAZEL_VERSION/bazel-$BAZEL_VERSION-installer-darwin-x86_64.sh"
       chmod +x "bazel-$BAZEL_VERSION-installer-darwin-x86_64.sh"
       ./bazel-$BAZEL_VERSION-installer-darwin-x86_64.sh --user
       export PATH="$HOME/bin:$PATH"
       bazel --version
       
   - name: Compile Tink C++ for iOS
     run: |
       bazel build --config=ios_x86_64 //path/to/your/target
